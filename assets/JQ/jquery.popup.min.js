/**
 * jquery.popup.js v. 2.0.0
 * author: Roma Maslennikov
 * link: https://github.com/romamaslennikov/jquery.popup.js
 **/
!function(a,b){function c(c,d){return this.obj=c,this._thisHeight=c.outerHeight(),this._window=a(b),this._thisTransformHideDefault="scale(0)",this._thisTransformShowDefault="scale(1)",this.popupBg=a("#popup-bg"),this.count="",this.options=a.extend({background:"#000",position:"absolute",opacity:.5,zIndex:123456788,classAnimateShow:"",classAnimateHide:"",time:400,onPopupClose:function(){},onPopupInit:function(){}},d,!0),"object"!=typeof d&&d?this[d]():(this.init(),this.initOverlay(),this.onEvents()),this}c.prototype={init:function(){this.wrapper("popup-wrapper",!0),this.lock("-lock","-blur",!0);var a=this;return""!=this.options.classAnimateShow?(this.obj.removeClass(this.options.classAnimateHide),this.obj.css({position:this.options.position,WebkitAnimationDuration:this.options.time/1e3+"s",animationDuration:this.options.time/1e3+"s",zIndex:this.options.zIndex+1}).show().addClass("animated "+this.options.classAnimateShow)):this.obj.css({pointerEvents:"auto",position:this.options.position,zIndex:this.options.zIndex+1,transform:this._thisTransformHideDefault,transition:"transform "+this.options.time/1e3+"s ease-out"}).fadeIn(this.options.time).css({transform:this._thisTransformShowDefault}),"fixed"==this.options.position?(this.popupPosition(),this._window.resize(function(){a.obj.css({transition:"left "+a.options.time/1e3+"s ease-out, top "+a.options.time/1e3+"s ease-out"}),a.popupPosition(),a.popupBgAddCss()})):"absolute"==this.options.position&&(this.popupPositionRezise(),a._window.resize(function(){a.obj.css({transition:"left "+a.options.time/1e3+"s ease-out, top "+a.options.time/1e3+"s ease-out"}),a.popupPositionRezise(),a.popupBgAddCss()})),this.options.onPopupInit(),this.obj},wrapper:function(b,c){var d=this;c?(this.obj.wrap("<div class='"+b+"'></div>"),a("."+b).css({"z-index":this.options.zIndex+2}).click(function(){d.popupClose()}),d.obj.click(function(a){a.stopPropagation()})):setTimeout(function(){d.obj.unwrap("."+b)},d.options.time)},lock:function(b,c,d){var e=a("html");d?(e.addClass(c),e.addClass(b)):(e.removeClass(c),setTimeout(function(){e.removeClass(b)},this.options.time))},initOverlay:function(){var b=this;null==document.getElementById("popup-bg")&&a("<div/>",{"data-count":"0",id:"popup-bg",css:{position:"fixed",top:0,height:a(document).height(),width:a(document).width(),left:0,display:"none",background:this.options.background,opacity:this.options.opacity,filter:"alpha(opacity="+100*this.options.opacity+")",zIndex:this.options.zIndex,cursor:"pointer"}}).appendTo("body"),this.popupBg=a("#popup-bg"),b.count=this.popupBg.data("count"),this.popupBg.data("count",++b.count),this.popupBg.show(),this.popupBgAddCss(),this._window.scroll(function(){b.popupBg.height(a(document).height()),b.popupBg.width(a(document).width())})},popupClose:function(){var b=this,c=a("#popup-bg");return b.count=c.data("count"),c.data("count",--b.count),b.count=c.data("count"),""!=this.options.classAnimateHide?(this.obj.removeClass(this.options.classAnimateShow),this.obj.addClass("animated "+this.options.classAnimateHide),setTimeout(function(){b.obj.hide()},b.options.time)):(this.obj.fadeOut(this.options.time).css({transform:this._thisTransformHideDefault}),this.obj.removeClass("animated "+this.options.classAnimateShow)),this.popupBg.fadeOut(this.options.time),b.wrapper("popup-wrapper"),b.lock("-lock","-blur"),this.obj},close:function(){var a=this;a.popupBg.trigger("click")},popupPosition:function(){return this.obj.css({top:this._window.height()/2-this.obj.outerHeight()/2,left:this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupPositionRezise:function(){var a=this.obj.offsetParent();return this._thisHeight>this._window.height()?this.obj.css({top:-a.offset().top+this._window.scrollTop()+5}):this.obj.css({top:-a.offset().top+this._window.scrollTop()+this._window.height()/2-this.obj.outerHeight()/2}),this.obj.outerWidth()>this._window.width()?this.obj.css({left:-a.offset().left+this._window.scrollLeft()+5}):this.obj.css({left:-a.offset().left+this._window.scrollLeft()+this._window.width()/2-this.obj.outerWidth()/2}),this.obj},popupBgAddCss:function(){this.popupBg.height(a(document).height()),this.popupBg.width(a(document).width())},onEvents:function(){var b=this;b.popupBg.on({click:function(){b.count=1,b.popupBg.data("count",1),b.popupClose(),a(document).off("keydown")}}),a(".js-popup-close",b.obj).on({click:function(){b.count=1,b.popupBg.data("count",1),b.popupClose()}}),a(document).on("keydown",function(a){27==a.keyCode&&(b.count=1,b.popupBg.data("count",1),b.popupClose())})}},a.fn.popup=function(a){var b=this;return new c(b,a),this}}(jQuery,window);